/*
 http://creativecommons.org/licenses/by/2.5/
 - Free for use in both personal and commercial projects
 - Attribution requires leaving author name, author link, and the license info intact
*/
(function(){var b=jQuery,l=function(){function b(){this.h=500;this.u=!0;this.p=700;this.A=50;this.D=!0;this.j=this.r=!1}b.prototype.q=function(a,b){return"Image "+a+" of "+b};return b}(),m=function(){function c(a){this.options=a;this.b=[];this.c=void 0;this.v()}c.prototype.v=function(){this.enable();this.s()};c.prototype.enable=function(){var a=this;b("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(f){a.start(b(f.currentTarget));return!1})};
c.prototype.s=function(){var a=this;b("<div id='lightboxOverlay' class='lightboxOverlay'></div><div id='lightbox' class='lightbox'><div class='lb-outerContainer'><div class='lb-container'><img class='lb-image' src='' /><div class='lb-nav'><a class='lb-prev' href='' ></a><a class='lb-next' href='' ></a></div><div class='lb-loader'><a class='lb-cancel'></a></div></div></div><div class='lb-dataContainer'><div class='lb-data'><div class='lb-details'><span class='lb-caption'></span><span class='lb-number'></span></div><div class='lb-closeContainer'><a class='lb-close'></a></div></div></div></div>").appendTo(b("body"));
this.a=b("#lightbox");this.g=b("#lightboxOverlay");this.e=this.a.find(".lb-outerContainer");this.f=this.a.find(".lb-container");this.n=parseInt(this.f.css("padding-top"),10);this.m=parseInt(this.f.css("padding-right"),10);this.k=parseInt(this.f.css("padding-bottom"),10);this.l=parseInt(this.f.css("padding-left"),10);this.g.hide().on("click",function(){a.end();return!1});this.a.hide().on("click",function(f){"lightbox"===b(f.target).attr("id")&&a.end();return!1});this.e.on("click",function(f){"lightbox"===
b(f.target).attr("id")&&a.end();return!1});this.a.find(".lb-prev").on("click",function(){0===a.c?a.d(a.b.length-1):a.d(a.c-1);return!1});this.a.find(".lb-next").on("click",function(){a.c===a.b.length-1?a.d(0):a.d(a.c+1);return!1});this.a.find(".lb-loader, .lb-close").on("click",function(){a.end();return!1})};c.prototype.start=function(a){function f(a){c.b.push({link:a.attr("href"),title:a.attr("data-title")||a.attr("title")})}var c=this,d=b(window);d.on("resize",b.proxy(this.i,this));b("select, object, embed").css({visibility:"hidden"});
this.i();this.b=[];var h=0,e=a.attr("data-lightbox");if(e)for(var e=b(a.prop("tagName")+'[data-lightbox="'+e+'"]'),g=0;g<e.length;g=++g)f(b(e[g])),e[g]===a[0]&&(h=g);else if("lightbox"===a.attr("rel"))f(a);else for(e=b(a.prop("tagName")+'[rel="'+a.attr("rel")+'"]'),g=0;g<e.length;g=++g)f(b(e[g])),e[g]===a[0]&&(h=g);a=d.scrollTop()+this.options.A;d=d.scrollLeft();this.a.css({top:a+"px",left:d+"px"}).fadeIn(this.options.h);this.d(h)};c.prototype.d=function(a){var f=this;this.o();var c=this.a.find(".lb-image");
this.g.fadeIn(this.options.h);b(".lb-loader").fadeIn("slow");this.a.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide();this.e.addClass("animating");var d=new Image;d.onload=function(){var h,e;c.attr("src",f.b[a].link);b(d);c.width(d.width);c.height(d.height);f.options.u&&(h=b(window).width(),e=b(window).height(),h=h-f.l-f.m-20,e=e-f.n-f.k-120,d.width>h||d.height>e)&&(d.width/h>d.height/e?(e=h,h=parseInt(d.height/(d.width/e),10)):(h=e,e=parseInt(d.width/
(d.height/h),10)),c.width(e),c.height(h));f.F(c.width(),c.height())};d.src=this.b[a].link;this.c=a};c.prototype.i=function(){this.g.width(b(window).width()).height(b(document).height())};c.prototype.F=function(a,b){function c(){d.a.find(".lb-dataContainer").width(g);d.a.find(".lb-prevLink").height(k);d.a.find(".lb-nextLink").height(k);d.C()}var d=this,h=this.e.outerWidth(),e=this.e.outerHeight(),g=a+this.l+this.m,k=b+this.n+this.k;h!==g||e!==k?this.e.animate({width:g,height:k},this.options.p,"swing",
function(){c()}):c()};c.prototype.C=function(){this.a.find(".lb-loader").hide();this.a.find(".lb-image").fadeIn("slow");this.H();this.G();this.B();this.t()};c.prototype.H=function(){var a=!1;try{document.createEvent("TouchEvent"),a=this.options.r?!0:!1}catch(b){}this.a.find(".lb-nav").show();1<this.b.length&&(this.options.j?(a&&this.a.find(".lb-prev, .lb-next").css("opacity","1"),this.a.find(".lb-prev, .lb-next").show()):(0<this.c&&(this.a.find(".lb-prev").show(),a&&this.a.find(".lb-prev").css("opacity",
"1")),this.c<this.b.length-1&&(this.a.find(".lb-next").show(),a&&this.a.find(".lb-next").css("opacity","1"))))};c.prototype.G=function(){var a=this;if("undefined"!==typeof this.b[this.c].title&&""!==this.b[this.c].title)this.a.find(".lb-caption").html(this.b[this.c].title).fadeIn("fast").find("a").on("click",function(){location.href=b(this).attr("href")});1<this.b.length&&this.options.D?this.a.find(".lb-number").text(this.options.q(this.c+1,this.b.length)).fadeIn("fast"):this.a.find(".lb-number").hide();
this.e.removeClass("animating");this.a.find(".lb-dataContainer").fadeIn(this.options.p,function(){return a.i()})};c.prototype.B=function(){this.b.length>this.c+1&&((new Image).src=this.b[this.c+1].link);0<this.c&&((new Image).src=this.b[this.c-1].link)};c.prototype.t=function(){b(document).on("keyup.keyboard",b.proxy(this.w,this))};c.prototype.o=function(){b(document).off(".keyboard")};c.prototype.w=function(a){a=a.keyCode;var b=String.fromCharCode(a).toLowerCase();if(27===a)this.end();else if("p"===
b||37===a)0!==this.c?this.d(this.c-1):this.options.j&&1<this.b.length&&this.d(this.b.length-1);else if("n"===b||39===a)this.c!==this.b.length-1?this.d(this.c+1):this.options.j&&1<this.b.length&&this.d(0)};c.prototype.end=function(){this.o();b(window).off("resize",this.i);this.a.fadeOut(this.options.h);this.g.fadeOut(this.options.h);b("select, object, embed").css({visibility:"visible"})};return c}();b(function(){var b=new l;new m(b)})}).call(this);